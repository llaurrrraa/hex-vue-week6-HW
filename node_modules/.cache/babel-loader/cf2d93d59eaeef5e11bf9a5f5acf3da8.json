{"remainingRequest":"/Users/xxxlauraxi/Documents/GitHub/week7-HW/node_modules/babel-loader/lib/index.js!/Users/xxxlauraxi/Documents/GitHub/week7-HW/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xxxlauraxi/Documents/GitHub/week7-HW/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/xxxlauraxi/Documents/GitHub/week7-HW/week7_HW/src/views/Cart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/xxxlauraxi/Documents/GitHub/week7-HW/week7_HW/src/views/Cart.vue","mtime":1646724095005},{"path":"/Users/xxxlauraxi/Documents/GitHub/week7-HW/week7_HW/babel.config.js","mtime":1646724094988},{"path":"/Users/xxxlauraxi/Documents/GitHub/week7-HW/node_modules/cache-loader/dist/cjs.js","mtime":1641697440268},{"path":"/Users/xxxlauraxi/Documents/GitHub/week7-HW/node_modules/babel-loader/lib/index.js","mtime":1641697440288},{"path":"/Users/xxxlauraxi/Documents/GitHub/week7-HW/node_modules/cache-loader/dist/cjs.js","mtime":1641697440268},{"path":"/Users/xxxlauraxi/Documents/GitHub/week7-HW/node_modules/vue-loader-v16/dist/index.js","mtime":1641697461808}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHsgU2hvcHBpbmdCYWdJY29uIH0gZnJvbSAiQGhlcm9pY29ucy92dWUvb3V0bGluZSI7CmltcG9ydCBlbWl0dGVyIGZyb20gIkAvbGlicmFyaWVzL2VtaXR0LmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJ0RGF0YTogewogICAgICAgIGNhcnRzOiAiIgogICAgICB9LAogICAgICBpc0xvYWRpbmdJdGVtOiAiIgogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFNob3BwaW5nQmFnSWNvbjogU2hvcHBpbmdCYWdJY29uCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDYXJ0OiBmdW5jdGlvbiBnZXRDYXJ0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kaHR0cC5nZXQoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVJMLCAiL3YyL2FwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfUEFUSCwgIi9jYXJ0IikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgX3RoaXMuY2FydERhdGEgPSByZXMuZGF0YS5kYXRhOyAvLyBjb25zb2xlLmxvZyh0aGlzLmNhcnREYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgbWludXNDYXJ0OiBmdW5jdGlvbiBtaW51c0NhcnQoaXRlbSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGl0ZW0ucXR5LS07CiAgICAgIHRoaXMuaXNMb2FkaW5nSXRlbSA9IGl0ZW0uaWQ7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHByb2R1Y3RfaWQ6IGl0ZW0uaWQsCiAgICAgICAgcXR5OiBpdGVtLnF0eQogICAgICB9OwogICAgICB0aGlzLiRodHRwLnB1dCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9VUkwsICIvdjIvYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9QQVRILCAiL2NhcnQvIikuY29uY2F0KGl0ZW0uaWQpLCB7CiAgICAgICAgZGF0YTogZGF0YQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuZ2V0Q2FydCgpOwoKICAgICAgICBfdGhpczIuaXNMb2FkaW5nSXRlbSA9ICIiOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRDYXJ0OiBmdW5jdGlvbiBhZGRDYXJ0KGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpdGVtLnF0eSsrOwogICAgICB0aGlzLmlzTG9hZGluZ0l0ZW0gPSBpdGVtLmlkOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBwcm9kdWN0X2lkOiBpdGVtLmlkLAogICAgICAgIHF0eTogaXRlbS5xdHkKICAgICAgfTsKICAgICAgdGhpcy4kaHR0cC5wdXQoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVJMLCAiL3YyL2FwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfUEFUSCwgIi9jYXJ0LyIpLmNvbmNhdChpdGVtLmlkKSwgewogICAgICAgIGRhdGE6IGRhdGEKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmlzTG9hZGluZ0l0ZW0gPSAiIjsKCiAgICAgICAgX3RoaXMzLmdldENhcnQoKTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlQ2FydDogZnVuY3Rpb24gZGVsZXRlQ2FydChpZCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIC8vIGNvbnNvbGUubG9nKGlkKTsKICAgICAgdmFyIGFwaSA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1VSTCwgIi92Mi9hcGkvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1BBVEgsICIvY2FydC8iKS5jb25jYXQoaWQpOwogICAgICB0aGlzLiRodHRwLmRlbGV0ZShhcGkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5nZXRDYXJ0KCk7CgogICAgICAgIGVtaXR0ZXIuZW1pdCgiZ2V0Q2FydCIpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldENhcnQoKTsKICB9Cn07"},{"version":3,"mappings":";AA2GA,SAASA,eAAT,QAAgC,wBAAhC;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,eAAe;AACbC,MADa,kBACN;AACL,WAAO;AACLC,cAAQ,EAAE;AACRC,aAAK,EAAE;AADC,OADL;AAILC,mBAAa,EAAE;AAJV,KAAP;AAMD,GARY;AASbC,YAAU,EAAE;AACVN,mBAAe,EAAfA;AADU,GATC;AAYbO,SAAO,EAAE;AACPC,WADO,qBACG;AAAA;;AACR,WAAKC,KAAL,CACGC,GADH,WAEOC,OAAO,CAACC,GAAR,CAAYC,WAFnB,qBAEyCF,OAAO,CAACC,GAAR,CAAYE,gBAFrD,YAIGC,IAJH,CAIQ,UAACC,GAAD,EAAS;AACb;AACA,aAAI,CAACb,QAAL,GAAgBa,GAAG,CAACd,IAAJ,CAASA,IAAzB,CAFa,CAGb;AACD,OARH;AASD,KAXM;AAYPe,aAZO,qBAYGC,IAZH,EAYS;AAAA;;AACdA,UAAI,CAACC,GAAL;AACA,WAAKd,aAAL,GAAqBa,IAAI,CAACE,EAA1B;AACA,UAAMlB,IAAG,GAAI;AACXmB,kBAAU,EAAEH,IAAI,CAACE,EADN;AAEXD,WAAG,EAAED,IAAI,CAACC;AAFC,OAAb;AAIA,WAAKV,KAAL,CACGa,GADH,WAEOX,OAAO,CAACC,GAAR,CAAYC,WAFnB,qBAEyCF,OAAO,CAACC,GAAR,CAAYE,gBAFrD,mBAE8EI,IAAI,CAACE,EAFnF,GAGI;AAAElB,YAAG,EAAHA;AAAF,OAHJ,EAKGa,IALH,CAKQ,YAAM;AACV,cAAI,CAACP,OAAL;;AACA,cAAI,CAACH,aAAL,GAAqB,EAArB;AACD,OARH;AASD,KA5BM;AA6BPkB,WA7BO,mBA6BCL,IA7BD,EA6BO;AAAA;;AACZA,UAAI,CAACC,GAAL;AACA,WAAKd,aAAL,GAAqBa,IAAI,CAACE,EAA1B;AACA,UAAMlB,IAAG,GAAI;AACXmB,kBAAU,EAAEH,IAAI,CAACE,EADN;AAEXD,WAAG,EAAED,IAAI,CAACC;AAFC,OAAb;AAIA,WAAKV,KAAL,CACGa,GADH,WAEOX,OAAO,CAACC,GAAR,CAAYC,WAFnB,qBAEyCF,OAAO,CAACC,GAAR,CAAYE,gBAFrD,mBAE8EI,IAAI,CAACE,EAFnF,GAGI;AAAElB,YAAG,EAAHA;AAAF,OAHJ,EAKGa,IALH,CAKQ,YAAM;AACV,cAAI,CAACV,aAAL,GAAqB,EAArB;;AACA,cAAI,CAACG,OAAL;AACD,OARH;AASD,KA7CM;AA8CPgB,cA9CO,sBA8CIJ,EA9CJ,EA8CQ;AAAA;;AACb;AACA,UAAMK,GAAE,aAAOd,OAAO,CAACC,GAAR,CAAYC,WAAnB,qBAAyCF,OAAO,CAACC,GAAR,CAAYE,gBAArD,mBAA8EM,EAA9E,CAAR;AACA,WAAKX,KAAL,CAAWiB,MAAX,CAAkBD,GAAlB,EAAuBV,IAAvB,CAA4B,YAAM;AAChC,cAAI,CAACP,OAAL;;AACAP,eAAO,CAAC0B,IAAR,CAAa,SAAb;AACD,OAHD;AAID;AArDM,GAZI;AAmEbC,SAnEa,qBAmEH;AACR,SAAKpB,OAAL;AACD;AArEY,CAAf","names":["ShoppingBagIcon","emitter","data","cartData","carts","isLoadingItem","components","methods","getCart","$http","get","process","env","VUE_APP_URL","VUE_APP_API_PATH","then","res","minusCart","item","qty","id","product_id","put","addCart","deleteCart","api","delete","emit","mounted"],"sourceRoot":"","sources":["/Users/xxxlauraxi/Documents/GitHub/week7-HW/week7_HW/src/views/Cart.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-5\">\n    <div class=\"title mb-5\">\n      <ShoppingBagIcon class=\"sb-icon\" />\n      <h6>購物車</h6>\n    </div>\n    <table class=\"table align-center align-middle\">\n      <thead>\n        <tr>\n          <th class=\"text-center\">產品名稱</th>\n          <th class=\"text-center\" style=\"width: 200px\">產品照片</th>\n          <th class=\"text-center\" style=\"width: 320px\">數量單位</th>\n          <th class=\"text-center\" style=\"width: 150px\">單價</th>\n          <th class=\"text-center\">總價</th>\n          <th class=\"text-center\">刪除</th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-if=\"cartData.carts.length > 0\">\n          <tr v-for=\"item in cartData.carts\" :key=\"item.product_id\">\n            <td class=\"text-center\">{{ item.product.title }}</td>\n            <td>\n              <img :src=\"item.product.imageUrl\" style=\"max-width: 150px\" />\n            </td>\n            <td class=\"text-center\" style=\"width: 350px\">\n              <div class=\"input-group\">\n                <loading\n                  v-show=\"isLoadingItem === item.id\"\n                  :is-full-page=\"false\"\n                  ><div class=\"loadingio-spinner-spinner-n3aayyd8xj\">\n                    <div class=\"ldio-hpqk1yjwodj\">\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                      <div></div>\n                    </div>\n                  </div>\n                </loading>\n                <div class=\"input-group input-group-sm qtyBtn\">\n                  <button\n                    class=\"btn btn-outline-secondary\"\n                    type=\"button\"\n                    id=\"button-minus1\"\n                    @click=\"minusCart(item)\"\n                  >\n                    －\n                  </button>\n                  <input\n                    type=\"text\"\n                    style=\"max-width: 50px; text-align: center\"\n                    class=\"form-control\"\n                    placeholder=\"\"\n                    aria-label=\"Example text with button addon\"\n                    aria-describedby=\"button-addon1\"\n                    v-model=\"item.qty\"\n                    readonly\n                  />\n                  <button\n                    class=\"btn btn-outline-secondary\"\n                    type=\"button\"\n                    id=\"button-add1\"\n                    @click=\"addCart(item)\"\n                  >\n                    ＋\n                  </button>\n                </div>\n                <span class=\"unit\"> {{ item.product.unit }} </span>\n              </div>\n            </td>\n            <td class=\"text-end\">\n              <del>原價 ${{ item.product.origin_price }}</del>\n              <br />\n              <span>現在特價 ${{ item.product.price }}</span>\n            </td>\n            <td class=\"text-center\">$ {{ item.final_total }}</td>\n            <td class=\"text-center\">\n              <button\n                type=\"button\"\n                class=\"btn btn-light\"\n                @click=\"deleteCart(item.id)\"\n              >\n                X\n              </button>\n            </td>\n          </tr>\n        </template>\n        <template v-else>\n          <tr>\n            <td colspan=\"6\" class=\"empty-txt text-center table-light\">\n              購物車很空哦 ～\n            </td>\n          </tr>\n        </template>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport { ShoppingBagIcon } from \"@heroicons/vue/outline\";\nimport emitter from \"@/libraries/emitt.js\";\nexport default {\n  data() {\n    return {\n      cartData: {\n        carts: \"\",\n      },\n      isLoadingItem: \"\",\n    };\n  },\n  components: {\n    ShoppingBagIcon,\n  },\n  methods: {\n    getCart() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_URL}/v2/api/${process.env.VUE_APP_API_PATH}/cart`\n        )\n        .then((res) => {\n          // console.log(res);\n          this.cartData = res.data.data;\n          // console.log(this.cartData);\n        });\n    },\n    minusCart(item) {\n      item.qty--;\n      this.isLoadingItem = item.id;\n      const data = {\n        product_id: item.id,\n        qty: item.qty,\n      };\n      this.$http\n        .put(\n          `${process.env.VUE_APP_URL}/v2/api/${process.env.VUE_APP_API_PATH}/cart/${item.id}`,\n          { data }\n        )\n        .then(() => {\n          this.getCart();\n          this.isLoadingItem = \"\";\n        });\n    },\n    addCart(item) {\n      item.qty++;\n      this.isLoadingItem = item.id;\n      const data = {\n        product_id: item.id,\n        qty: item.qty,\n      };\n      this.$http\n        .put(\n          `${process.env.VUE_APP_URL}/v2/api/${process.env.VUE_APP_API_PATH}/cart/${item.id}`,\n          { data }\n        )\n        .then(() => {\n          this.isLoadingItem = \"\";\n          this.getCart();\n        });\n    },\n    deleteCart(id) {\n      // console.log(id);\n      const api = `${process.env.VUE_APP_URL}/v2/api/${process.env.VUE_APP_API_PATH}/cart/${id}`;\n      this.$http.delete(api).then(() => {\n        this.getCart();\n        emitter.emit(\"getCart\");\n      });\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.title {\n  display: flex;\n  justify-content: center;\n  .sb-icon {\n    width: 20px;\n    margin-right: 0.5rem;\n    color: #9c9c9c;\n  }\n  h6 {\n    margin-bottom: 0;\n    letter-spacing: 1.5px;\n    color: #9c9c9c;\n  }\n}\n.table {\n  tbody {\n    tr {\n      .empty-txt {\n        padding: 4rem 0;\n        letter-spacing: 1.5px;\n        color: rgba(156, 156, 156, 0.5);\n      }\n      .text-center {\n        .input-group {\n          justify-content: center;\n          .qtyBtn {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n        }\n        .unit {\n          margin-top: 0.5rem;\n        }\n      }\n    }\n  }\n}\n@keyframes ldio-hpqk1yjwodj {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.ldio-hpqk1yjwodj div {\n  left: 48px;\n  top: 3px;\n  position: absolute;\n  animation: ldio-hpqk1yjwodj linear 1s infinite;\n  background: #17da9f;\n  width: 6px;\n  height: 12px;\n  border-radius: 2.4px / 2.4px;\n  transform-origin: 3px 26px;\n}\n.ldio-hpqk1yjwodj div:nth-child(1) {\n  transform: rotate(0deg);\n  animation-delay: -0.9166666666666666s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(2) {\n  transform: rotate(30deg);\n  animation-delay: -0.8333333333333334s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(3) {\n  transform: rotate(60deg);\n  animation-delay: -0.75s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(4) {\n  transform: rotate(90deg);\n  animation-delay: -0.6666666666666666s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(5) {\n  transform: rotate(120deg);\n  animation-delay: -0.5833333333333334s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(6) {\n  transform: rotate(150deg);\n  animation-delay: -0.5s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(7) {\n  transform: rotate(180deg);\n  animation-delay: -0.4166666666666667s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(8) {\n  transform: rotate(210deg);\n  animation-delay: -0.3333333333333333s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(9) {\n  transform: rotate(240deg);\n  animation-delay: -0.25s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(10) {\n  transform: rotate(270deg);\n  animation-delay: -0.16666666666666666s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(11) {\n  transform: rotate(300deg);\n  animation-delay: -0.08333333333333333s;\n  background: #17da9f;\n}\n.ldio-hpqk1yjwodj div:nth-child(12) {\n  transform: rotate(330deg);\n  animation-delay: 0s;\n  background: #17da9f;\n}\n.loadingio-spinner-spinner-n3aayyd8xj {\n  width: 51px;\n  height: 51px;\n  display: inline-block;\n  overflow: hidden;\n}\n.ldio-hpqk1yjwodj {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transform: translateZ(0) scale(0.51);\n  backface-visibility: hidden;\n  transform-origin: 0 0; /* see note above */\n}\n.ldio-hpqk1yjwodj div {\n  box-sizing: content-box;\n}\n</style>\n"]}]}